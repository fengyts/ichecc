<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ichecc.domain.VipDepositOrderMapper">
	
	<select id="MybatisVipDepositOrderDAO_select_latest_unpaid" parameterType="map" resultMap="VipDepositOrderDOResultMap">
		SELECT
			<include refid="MybatisVipDepositOrderDAO_all_column_fields" />
		FROM
			vip_deposit_order
		WHERE
			order_status = '01'	
			AND user_id = #{userId}
			AND create_time &gt;= #{orderTime}
		ORDER BY id DESC
		LIMIT 1
	</select>
	
	<select id="MybatisVipDepositOrderDAO_select_order_by_orderno" parameterType="String" resultMap="VipDepositOrderDOResultMap">
		SELECT
			<include refid="MybatisVipDepositOrderDAO_all_column_fields" />
		FROM
			vip_deposit_order
		WHERE order_no = #{orderNo}
	</select>
	
	<update id="MybatisVipDepositOrderDAO_update_order_by_orderno" parameterType="com.ichecc.domain.VipDepositOrderDO">
		UPDATE vip_deposit_order
		<set>
<!-- 			<if test="orderNo != null  and orderNo != '' ">order_no=#{orderNo},</if> -->
<!-- 			<if test="userId != null ">user_id=#{userId},</if> -->
<!-- 			<if test="openid != null  and openid != '' ">openid=#{openid},</if> -->
<!-- 			<if test="prepayId != null  and prepayId != '' ">prepay_id=#{prepayId},</if> -->
			<if test="orderStatus != null  and orderStatus != '' ">order_status=#{orderStatus},</if>
			<if test="transactionId != null  and transactionId != '' ">transaction_id=#{transactionId},</if>
<!-- 			<if test="amount != null  and amount != '' ">amount=#{amount},</if> -->
			<if test="tradeState != null  and tradeState != '' ">trade_state=#{tradeState},</if>
			<if test="tradeStateDesc != null  and tradeStateDesc != '' ">trade_state_desc=#{tradeStateDesc},</if>
			<if test="bankType != null  and bankType != '' ">bank_type=#{bankType},</if>
			<if test="timeEnd != null ">time_end=#{timeEnd},</if>
			<if test="modifyTime != null ">modify_time=#{modifyTime},</if>
		</set>
		WHERE order_no = #{orderNo}
	</update>
	
</mapper>